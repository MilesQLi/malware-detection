# feature_extraction_pdf.py
#
# Read a list of PDF files and extract
# feature sets from them.
#
# Input: target directory containing the sample files.
#
# Output: PDF object counts in CSV format.
#
# Author: Derek Chadwick
# Date  : 05/09/2016
#
# TODO: all of the things

from multiprocessing import Pool
import os
from csv import writer
import numpy as np
import pandas as pd
import math
import scipy.misc
import array
import time as tm
import re
import subprocess as sub


# Start of Script

target_dir = "/opt/vs/legitware/"
out_file = "data/pdf-features-legit.csv"
#out_file = "data/pdf-features-vs251.csv"

pdf_objs = {} 

file_list = os.listdir(target_dir)

#for idx, fname in enumerate(file_list):
#    file_list[idx] = target_dir + fname
    
print("Got {:d} PDF files.".format(len(file_list)))

for fname in file_list:
    fname = target_dir + fname
    print("Processing PDF file: {:s}".format(fname))
    fip = open(fname, 'r')
    inlines = fip.readlines()
    
    for idx, line in inlines:
        tokens = line.split(" ")
        for token in tokens:
            if token.startswith("/"):
                pdf_objs[token

# End of Script
