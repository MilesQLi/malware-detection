# malware-detection

Experiments in malware detection and classification using machine learning techniques.

## 1. Microsoft Malware Classification Challenge
### 1.1 Feature Engineering
    Initial feature engineering consisited of extracting various keyword counts from the ASM files 
    and the entropy and file size from the BYTE files of the 10868 malware samples in the training set. 
    Following further study of the research literature, image files of the first 1000 bytes of 
    the ASM and BYTE files were created and combined with keyword and entropy data. This resulted 
    in a set of 2018 features.
### 1.2 Feature Selection
    Statistical analysis of the feature set indicated that many of the features and low standard 
    deviation and mean variance, making them unsuitable for learning. Therefore, two reduced 
    features sets were created based on the 10% and 20% of features with the largest variance.
    Testing with an ExtraTreesClassifier and 10-fold cross validation produced the following results:
    - Original ASM Keyword Counts (1006 features): logloss = 0.034
    - 10% Highest Variance with Entropy and Image Features (200 features): logloss = 0.0174
    - 20% Highest Variance with Entropy and Image Features (400 features): logloss = 0.0164
    - Final feature selection, 20% highest variance features and image features with feature statistics:
      ExtraTreesClassifier with 1000 estimators on 10868 training samples and 421 features 
      using 10-fold cross validation:
        multiclass logloss = 0.0140
        score = 0.9977
        Confustion Matrix:
        [[1541    0    0    0    0    0    0    0    0]
        [   1 2475    2    0    0    0    0    0    0]
        [   0    0 2942    0    0    0    0    0    0]
        [   1    0    0  474    0    0    0    0    0]
        [   5    0    0    0   37    0    0    0    0]
        [   5    0    0    0    0  746    0    0    0]
        [   1    0    0    0    0    0  397    0    0]
        [   0    0    0    0    0    0    0 1227    1]
        [   0    0    0    0    0    0    0    9 1004]]
### 1.3 Model Selection
    Selection of candidate models using GridSearchCV to find classifier parameters. 
    - SVM:
    - ExtraTrees:
    - XGBoost:
    - Bayes
### 1.4 Graphs
!["File Entropy Graph 1"](https://github.com/dchad/malware-detection/blob/master/resources/file-entropy-by-class.png "File Entropy by Malware Class")
    #### 1. Shannon's Entropy by malware class. A score of 0.0 means the bytes are all the same value, 
    ### a score of 1.0 means every byte in the file has a different value.
!["File Entropy Graph 2"](https://github.com/dchad/malware-detection/blob/master/resources/file-entropy-by-size.png "File Entropy by File Size")
    #### 2. Shannon's Entropy by file size. A score of 0.0 means the bytes are all the same value, 
    #### 3. a score of 1.0 means every byte in the file has a different value.
!["ASM Registry Counts"](https://github.com/dchad/malware-detection/blob/master/resources/register-counts.png "EDX by ESI Registry Counts")
    ### Assembler register EDX by ESI counts.
## 2. Automated Sensor Malware Detection
TODO:
## 3. References
TODO:
